«Режим репетиции» в скриптах

По-русски это называется «dry run». Любой скрипт, выполнение которого стоит дорого, должен иметь режим имитации действий. Грубо говоря, вывод на экран вместо удаления файлов.

Нужно это не только лишь для отладки кода во время разработки, но и для постоянного контроля в жизни.

А особо дорогие скрипты должны этот режим выполнять по умолчанию, чтобы случайно не грохнуть чего лишнего.

Свежий пример. Писал короткий скрипт с целью очистить местную группу в телеграме от сотен китайских спам-ботов. Алгоритм простой: идем по всем именам в чате, и если имя состоит из иероглифов — баним.

В продакшне оказалось, что наскоро выбранный модуль, которым я определял, китайский ли язык, дает true на половину всех участников. Как так? Легко: он, зараза, понимает китайскую транслитерацию.

Привычка реализовывать dry run спасла украинский клуб автолюбителей от уничтожения.
